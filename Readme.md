MobileID InApp Integration - Sample App (react-native)
=======================================

This is a sample app (React Native) that demonstrates how to integrate with Signicat's MobileID InApp solution

This app requires a backend. A sample backend can be downloaded from Signicat's Github. Make sure that the backend is running before running this app.

- Merchant backend-related configurations need to be set in `js/configs/MerchantConfig.js file`
- Signicat backend-related configurations need to be set in `js/configs/config.json`. Contact Signicat to get configurations for your service.

## Prerequisites
The following software needs to be installed and configured before building the sample app.

- Node (14.7.0 or higher): https://nodejs.org/en/download/
- Java (1.8 or higher)
- Gradle (6.0.1 or higher): https://gradle.org/install/
- React Native tools: https://reactnative.dev/docs/environment-setup
- Android Studio (only for Android): https://developer.android.com/studio/install
- Ruby (only for iOS) (2.6.3 or higher - not 3.x.x): https://www.ruby-lang.org/en/documentation/installation/
- bundler (only for iOS) (2.1.4+ see bottom of Gemfile.lock): https://bundler.io/
- xcpretty (only for iOS, installed via bundler): https://github.com/xcpretty/xcpretty
- CocoaPods (only for iOS, installed via bundler): https://cocoapods.org/
- Xcode (only for iOS): https://apps.apple.com/us/app/xcode/id497799835?mt=12

Some additional Ruby gem dependencies will also be installed via bundler to support Fastlane, https://fastlane.tools/,
an app automation tool used by Signicat when building and uploading the app to the stores.
- Fastlane can be ignored for the purposes of running this app
- For a complete list of Ruby gem dependencies installed via bundler, refer to Gemfile.lock

## Installation of Ruby (iOS only, first time only)

If you already have Ruby 2.6.3+ installed, you can skip this. Otherwise it is recommended to first
install RVM (Ruby Version Manager) https://rvm.io/rvm/install and then Ruby via RVM.

Open a new terminal and verify Ruby (version 3.x.x not yet supported):

    ruby -v

## Installation of bundler and dependencies (iOS only, first time only)
Install bundler:

    gem install bundler:<version>

where `<version>` can be found at the bottom of `Gemfile.lock` in this repository.

Install bundler dependencies as specified by Gemfile.lock:

    bundle install

## Install React Native dependencies from package-lock.json
To configure the sample app for the first time, run the following commands from the project root folder,
       
    npm run lockedinstall

Additional configuration on iOS (first time only),

    cd ios (assuming that you are in the project root folder)
    pod deintegrate
    pod install

## Building and running
Run on Android

    react-native run-android

Run on iOS (or run directly from Xcode)

    react-native run-ios

## Make application archive
On Android 

Make sure that Android SDK is installed and properly configured.

    # assuming you are at the root of the react-native project
    cd android 
    
    # creates an .apk file in the build/outputs/apk folder
    gradle build
    
    # Note that application is signed with an attached sample debug keystore. In your production app, you should generate and use on your own certificate
    
On iOS

Use XCode. For more information, see the XCode user manual for the version you are working with.

It is recommended to change the App ID, and generate and use your own certificates and provisioning profiles.
    
## Regarding HTTP traffic

Currently, the sample app is configured to enable HTTP traffic. In your production app, it is highly encouraged to only allow HTTPS traffic.

    On iOS, change configurations for <key>NSAppTransportSecurity</key> in the info.plist file
    
    On Android, modify the android/app/src/main/res/xml/network_security_config.xml file
    
    
## More information
- Push notifications are configured in this project - see Google FCM for Android, and iOS Push notifications for iOS.
- The Encap Client SDK is configured both for Android and iOS - For more, see the Encap client SDK manuals
- Note that the google-services.json file attached to this project is generated by Signicat for this sample app, and is registered to Signicat's Firebase account. For your production app, register your app to the your Firebase project, get your own google-services.json, and use it to replace the one provided here

